---
name: ai-recommend
description: 推荐算法开发，包括用户画像、岗位推荐、推荐解释、大学推荐
license: MIT
compatibility: opencode
---

## 我做什么

负责推荐系统的开发，包括用户画像构建、岗位推荐算法、推荐解释生成、大学推荐等功能。

## 使用场景

- 推荐功能开发
- 用户画像更新
- 推荐结果优化
- 大学推荐算法开发

## 输入格式

```json
{
  "recommendation_type": "岗位/课程/内容/大学",
  "user_features": [],
  "item_features": [],
  "evaluation_metrics": []
}
```

## 输出格式

```json
{
  "files_created": [],
  "user_profile_builder": {},
  "recommendation_algorithm": {},
  "matching_engine": {},
  "explanation_generator": {},
  "a_b_testing": {},
  "tests_written": []
}
```

## 执行流程

1. 设计用户画像结构
2. 实现画像构建流程
3. 实现推荐算法
4. 实现匹配引擎
5. 实现推荐解释
6. 配置A/B测试
7. 编写测试用例

## 大学推荐规则

### 用户目标设置

| 字段 | 是否必填 | 说明 |
|-----|---------|------|
| 目标省份 | 可选 | 可选择任意省份或选择"不设置省份" |
| 预估分数 | 可选 | 可输入预估分数或选择"不设置分数" |

### 推荐场景与优先级

| 场景 | 条件 | 推荐逻辑 | 结果数量 |
|-----|------|---------|---------|
| 场景1 | 省份+分数+专业 | 1. 该省符合分数和专业的大学<br>2. 全国符合分数和专业的大学 | 最多5所 |
| 场景2 | 只有省份 | 1. 同省该专业大学<br>2. 全国该专业大学 | 最多5所 |
| 场景3 | 只有分数 | 按分数匹配（±30分范围） | 最多5所 |
| 场景4 | 都没有 | 按专业匹配度和就业率排序 | 最多5所 |
| 场景5 | 省份+分数（无专业） | 1. 该省符合分数的大学<br>2. 全国符合分数的大学 | 最多5所 |
| 场景6 | 只有省份（无专业） | 本省高校按就业率排序 | 最多5所 |
| 兜底 | 无法匹配 | 就业率最高的大学 | 最多5所 |

### 分数匹配规则

- **分数范围**：用户分数 ± 30分
- **排序方式**：分数降序（分数越高越靠前）

### 专业匹配度计算

```
专业匹配度 = 基于大学王牌专业与目标专业的重合度

匹配度评分：
- 重合专业数 >= 2：100分
- 重合专业数 = 1：60分
- 同属一个学科门类：30分
- 无匹配：0分
```

### 专业与大学王牌专业映射示例

```python
major_to_strengths = {
    '计算机科学与技术': ['计算机科学与技术', '软件工程', '人工智能', '电子信息工程', '数据科学与大数据技术'],
    '人工智能': ['人工智能', '计算机科学与技术', '自动化', '电子信息工程'],
    '临床医学': ['临床医学', '基础医学', '口腔医学', '公共卫生与预防医学'],
    # ... 其他专业
}
```

### 录取分数显示规则

在大学卡片中显示录取分数信息：

| 显示项目 | 格式 | 示例 |
|---------|------|------|
| 最近一年录取分数 | `{年份}年: {最低分}分` | 2024年: 680分 |
| 历史录取分数 | `{年份1}分 → {年份2}分` | 2023年659分 → 2022年652分 |
| 完整显示 | `{最近一年} ({历史})` | 2024年: 680分 (2023年659分 → 2022年652分) |

**显示优先级：**
1. 优先显示用户目标省份的录取分数
2. 如目标省份无数据，显示任意省份最新数据
3. 历史分数最多显示2年

### 大学数据覆盖规则

#### 各省大学数量要求

| 省份类型 | 最少数量 | 示例 |
|---------|---------|------|
| 北京 | 10所 | 清华、北大、北航、北理工、北邮 |
| 上海 | 8所 | 复旦、上交、同济、华东师范 |
| 江苏 | 6所 | 南大、东南、南航、河海 |
| 浙江/广东/天津/湖北/陕西 | 4所 | 各省985/211大学 |
| 其他省份 | 3所 | 各省最好的大学 |
| **总计** | **≥100所** | 覆盖全国31个省市 |

#### 专业覆盖要求

每所大学需标注王牌专业（3-5个），覆盖专业门类：
- 工学：计算机科学与技术、人工智能、电子信息工程
- 理学：数学、物理学、化学、统计学
- 医学：临床医学、口腔医学、药学
- 法学：法学、知识产权、社会学
- 经济学：金融学、经济学、会计学
- 文学：汉语言文学、英语、新闻学

#### 数据更新规则

| 数据类型 | 更新频率 |
|---------|---------|
| 大学基本信息 | 每年 |
| 录取分数线 | 每年 |
| 就业率 | 每年 |
| 专业排名 | 每4年 |

### 注意事项

- 平衡准确性和多样性
- 避免信息茧房
- 保护用户隐私
- 做好冷启动处理
- 分数匹配时考虑不同省份分数线差异
- 同等条件下优先展示就业率高的大学

## 推荐模型

- 推荐系统：`anthropic/claude-opus-4-20240307`
