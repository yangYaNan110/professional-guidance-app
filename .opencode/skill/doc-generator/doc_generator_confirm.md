# æ–‡æ¡£ç¡®è®¤æŠ€èƒ½

## æè¿°
å‘ç”¨æˆ·å±•ç¤ºè®¾è®¡æ„æ€ï¼Œé€šè¿‡å‹å¥½çš„å¯¹è¯è·å–ç”¨æˆ·çš„ç¡®è®¤æˆ–ä¿®æ”¹æ„è§ã€‚

## è§¦å‘è¯
ç¡®è®¤è®¾è®¡ã€æŸ¥çœ‹è®¾è®¡ã€æ˜¯å¦åŒæ„ã€è¿™æ ·å¯ä»¥å—

## æ ¸å¿ƒèƒ½åŠ›
1. **è®¾è®¡æ‘˜è¦**ï¼šå±•ç¤ºåˆ†æçš„è®¾è®¡æ„æ€æ‘˜è¦
2. **æ¨¡å—åˆ—è¡¨**ï¼šåˆ—å‡ºæ¶‰åŠçš„è¡¨å’Œæ•°æ®æ¨¡å‹
3. **å…³é”®è®¾è®¡ç‚¹**ï¼šçªå‡ºé‡è¦çš„è®¾è®¡å†³ç­–
4. **å¯é€‰æ–¹æ¡ˆ**ï¼šæä¾›è®¾è®¡æ–¹æ¡ˆçš„å¤‡é€‰é€‰é¡¹
5. **ç”¨æˆ·äº¤äº’**ï¼šæ”¶é›†ç”¨æˆ·çš„ç¡®è®¤æˆ–ä¿®æ”¹æ„è§
6. **çŠ¶æ€ç®¡ç†**ï¼šç®¡ç†ç¡®è®¤çŠ¶æ€ï¼ˆpending/confirmed/modifyingï¼‰

## è¾“å…¥å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-------|------|------|------|
| design_result | object | æ˜¯ | æ¥è‡ªdoc-generator-designçš„è®¾è®¡ç»“æœ |
| document_title | string | æ˜¯ | è¦ç”Ÿæˆçš„æ–‡æ¡£æ ‡é¢˜ |
| user_input | string | å¦ | ç”¨æˆ·çš„æ–°è¾“å…¥ï¼ˆå¦‚æœæœ‰ä¿®æ”¹æ„è§ï¼‰ |
| confirmation_state | string | å¦ | ç¡®è®¤çŠ¶æ€ |

## è¾“å‡ºæ ¼å¼

```json
{
  "message_to_user": "string",
  "design_summary": "string",
  "modules": [
    {
      "name": "string",
      "tables": ["string"],
      "storage_type": "string",
      "key_points": ["string"]
    }
  ],
  "options": [
    {
      "name": "string",
      "description": "string",
      "selected": boolean
    }
  ],
  "questions": [
    {
      "question": "string",
      "options": ["string"]
    }
  ],
  "confirmation_required": boolean,
  "confirmation_text": "string",
  "next_action": "wait_confirm|generate|request_modification"
}
```

## ä½¿ç”¨ç¤ºä¾‹

```
è¾“å…¥ï¼š
{
  "design_result": {
    "tables": [...],
    "ddl_statements": "..."
  },
  "document_title": "çˆ¬è™«æ•°æ®åˆ†æ",
  "confirmation_state": "pending"
}

è¾“å‡ºï¼š
{
  "message_to_user": "æˆ‘å·²ç»å®Œæˆäº†çˆ¬è™«æ•°æ®éœ€æ±‚çš„åˆ†æï¼Œå¹¶è®¾è®¡äº†å¯¹åº”çš„æ•°æ®æ¨¡å‹ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„è®¾è®¡æ„æ€ï¼š",
  "design_summary": "å…±åˆ†æäº†6ä¸ªéœ€è¦çˆ¬å–æ•°æ®çš„æ¨¡å—ï¼Œè®¾è®¡äº†5å¼ æ ¸å¿ƒæ•°æ®è¡¨",
  "modules": [
    {
      "name": "ä¸“ä¸šè¡Œæƒ…æ•°æ®",
      "tables": ["app_major_market_data"],
      "storage_type": "PostgreSQL",
      "key_points": ["åŒ…å«å°±ä¸šç‡ã€è–ªèµ„ã€çƒ­åº¦æŒ‡æ•°ç­‰å­—æ®µ", "æŒ‰å­¦ç§‘é—¨ç±»åˆ†ç±»å­˜å‚¨", "æ”¯æŒæŒ‰æ—¶é—´æ’åºå’Œç­›é€‰"]
    },
    {
      "name": "å½•å–åˆ†æ•°çº¿",
      "tables": ["app_university_admission_scores", "app_universities"],
      "storage_type": "PostgreSQL",
      "key_points": ["æ”¯æŒæŒ‰çœä»½ã€å¹´ä»½æŸ¥è¯¢", "åŒ…å«å†å²åˆ†æ•°çº¿æ•°æ®", "ä¸å¤§å­¦è¡¨å…³è”"]
    }
  ],
  "options": [
    {
      "name": "åŒ…å«DDLè„šæœ¬",
      "description": "åœ¨æ–‡æ¡£ä¸­åŒ…å«å®Œæ•´çš„å»ºè¡¨SQLè¯­å¥",
      "selected": true
    },
    {
      "name": "åŒ…å«ERå›¾",
      "description": "ä½¿ç”¨Mermaidæ ¼å¼å±•ç¤ºè¡¨å…³ç³»",
      "selected": true
    }
  ],
  "questions": [
    {
      "question": "æ–‡æ¡£éœ€è¦åŒ…å«å“ªäº›é¢å¤–å†…å®¹ï¼Ÿ",
      "options": ["æ•°æ®å­—å…¸", "ç´¢å¼•è¯´æ˜", "å…¨éƒ¨åŒ…å«"]
    }
  ],
  "confirmation_required": true,
  "confirmation_text": "ä»¥ä¸Šæ˜¯æˆ‘çš„è®¾è®¡æ„æ€ï¼ŒåŒ…å«5å¼ æ•°æ®è¡¨å’Œå¯¹åº”çš„DDLè„šæœ¬ã€‚æ˜¯å¦ç¡®è®¤ç”Ÿæˆæ–‡æ¡£ï¼Ÿå¦‚éœ€ä¿®æ”¹æˆ–æœ‰å…¶ä»–è¦æ±‚ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚",
  "next_action": "wait_confirm"
}
```

## å¯¹è¯ç¤ºä¾‹

```
Agent: æˆ‘å·²ç»åˆ†æäº†é¡¹ç›®ä¸­éœ€è¦çˆ¬å–æ•°æ®çš„æ¨¡å—ï¼Œå¹¶è®¾è®¡äº†ç›¸åº”çš„æ•°æ®æ¨¡å‹ã€‚

ğŸ“Š è®¾è®¡æ‘˜è¦ï¼š
- å…±è¯†åˆ«6ä¸ªæ•°æ®çˆ¬å–æ¨¡å—
- è®¾è®¡5å¼ æ ¸å¿ƒæ•°æ®è¡¨
- åŒ…å«ä¸“ä¸šè¡Œæƒ…ã€å½•å–åˆ†æ•°çº¿ã€å¤§å­¦ä¿¡æ¯ç­‰

ğŸ“‹ ä¸»è¦æ¨¡å—ï¼š
1. ä¸“ä¸šè¡Œæƒ…æ•°æ® â†’ app_major_market_data
2. å½•å–åˆ†æ•°çº¿ â†’ app_university_admission_scores
3. å¤§å­¦ä¿¡æ¯ â†’ app_universities
4. ...

ğŸ“„ æ–‡æ¡£å°†åŒ…å«ï¼š
- æ•°æ®éœ€æ±‚åˆ†ææŠ¥å‘Š
- æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡ï¼ˆDDLï¼‰
- ERå…³ç³»å›¾ï¼ˆMermaidæ ¼å¼ï¼‰
- æ•°æ®å­—å…¸

æ˜¯å¦ç¡®è®¤ç”Ÿæˆæ–‡æ¡£ï¼Ÿå¦‚æœéœ€è¦ä¿®æ”¹æˆ–æœ‰å…¶ä»–è¦æ±‚ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚
```

## ä¸å…¶ä»–Skillçš„é…åˆ
- æ¥æ”¶ `doc-generator-design` çš„è®¾è®¡ç»“æœ
- ç”¨æˆ·ç¡®è®¤åï¼Œè¾“å‡ºç»™ `doc-generator-generate` ç”Ÿæˆæ–‡æ¡£
- ç”¨æˆ·æœ‰ä¿®æ”¹æ„è§ï¼Œè¿”å›ç»™ `doc-generator-design` è°ƒæ•´è®¾è®¡
